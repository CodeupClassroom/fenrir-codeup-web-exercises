<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>.map() | .filter() | .reduce()</title>
</head>
<body>


<script>
    //.reduce() with nums

    let cityObjectsArray = [
        {
            name: "San Antonio, TX",
            county: "Bexar",
            population: 1_434_625},
        {
            name: "Corpus Christi, TX",
            county: "Nueces",
            population: 317_863},
        {
            name: "Laredo, TX",
            county: "Webb",
            population: 263_640}
    ]

    //TODO: What's the combined population of the three cities in our array and the average between them? Use .reduce() to get the combined sum of the populations first. Your console.log should be:`The total population of the three cities is: (numPop) with an average of (numAvg)`

    let totalPop = cityObjectsArray.reduce((total, cityObj) => {
        return total + cityObj.population
    }, 0);

    console.log(`The total population of the three cities is: ${totalPop} with an average of ${(totalPop / 3).toFixed(0)}`);

    //.reduce() with string
    //TODO: With .reduce(), can you get me one string with all of the counties together like so: "Here's some counties from Texas: 1. Bexar 2. Nueces 3. Webb

    let countiesString = cityObjectsArray.reduce((accu, cityObj, index) => {
        return accu + " " + (index + 1) + ". " + cityObj.county;
    }, "Here's some counties in Texas: ")

    console.log(countiesString);

    //.reduce() with an object

    //TODO: Jimi H. below has a grades property that is an array of grades. Can you use .reduce() to make a gradeObject with a number property of what number grade it is followed by a value of the grade?

    //EX: { 1: 88, 2: 85, 3: 100, 4: 92, 5: 78, 6: 86 }
    let student = {
        name: "Jimi H.",
        grades: [88, 85, 100, 92, 78, 86],
        currentlyEnrolled: true
    }

    let gradeObject = student.grades.reduce((acc, currentValue, index) => {
        acc[index + 1] = currentValue;

        return acc;
    }, {})

    console.log(gradeObject);

    //.filter()
    let student2 = {
        name: "Aretha F.",
        grades: [92, 80, 55, 100, 78, 98],
        currentlyEnrolled: true
    }

    let student3 = {
        name: "Fergie F.",
        grades: [68, 80, 75, 90, 92, 55],
        currentlyEnrolled: false
    }

    let student4 = {
        name: "Lil' K.",
        grades: [92, 75, 55, 92, 78, 98],
        currentlyEnrolled: false
    }

    let studentsArr = [student, student2, student3, student4];

    //TODO: Use .filter() to make an array of students who are currently enrolled.

    let currentlyEnrolledStudents = studentsArr.filter((student) => student.currentlyEnrolled === true);

    console.log(currentlyEnrolledStudents);

    //TODO: Can you filter our students and give me back all students who averaged 80 and above regardless of enrollment status?

    let above80AverageArray = studentsArr.filter((student) =>{
        let total = 0;
        student.grades.forEach((grade) =>{
            total += grade;
        })

        let averageGrade = total / student.grades.length;
        console.log(`The current student's average is ${averageGrade.toFixed(2)}`);
        if(averageGrade > 80){
            return student;
        }
    })


    console.log(above80AverageArray);


    //.map()
    //TODO: Can you use .map() to return an array from a student.grades that is an array of the letter grade?
    //Example:
    // [92, 75, 55, 92, 78, 98]
    // [A, C, F, A, C, A]

    studentsArr.forEach((student) =>{

        console.log(student.grades.map((grade) => {
            if (grade > 90) {
                return 'A';
            } else if (grade > 80) {
                return 'B';
            } else if (grade > 70) {
                return 'C';
            } else {
                return 'F'
            }
        }));
    })


</script>

</body>
</html>